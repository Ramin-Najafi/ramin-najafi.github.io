<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Linen â€” your personal memory app that remembers your life, understands context, and helps you think, recall, and decide.">
    <meta name="theme-color" content="#fafafa">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Linen">
    
    <title>Linen â€” Your Memory</title>
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <link rel="apple-touch-icon" href="./apple-touch-icon.png">
    <link rel="manifest" href="./manifest.json">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital@0;1&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Hamburger Icon for Mobile -->
        <div id="linen-hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title">Linen</h1>
                <p class="app-tagline">Your memory, your context</p>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="capture">
                    <span class="nav-icon">âœŽ</span>
                    <span class="nav-label">Capture</span>
                </button>
                <button class="nav-item" data-view="chat">
                    <span class="nav-icon">ðŸ’¬</span>
                    <span class="nav-label">Chat</span>
                </button>
                <button class="nav-item" data-view="memories">
                    <span class="nav-icon">ðŸ“š</span>
                    <span class="nav-label">Memories</span>
                </button>
                <button class="nav-item" data-view="settings">
                    <span class="nav-icon">âš™</span>
                    <span class="nav-label">Settings</span>
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <div class="memory-count">
                    <span class="count-label">Memories</span>
                    <span class="count-number" id="memory-count">0</span>
                </div>
            </div>
        </aside>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Capture View -->
            <section class="view active" id="capture-view">
                <div class="view-header">
                    <h2>What's on your mind?</h2>
                    <p class="view-subtitle">Capture anything you want to remember</p>
                </div>
                
                <form class="capture-form" id="capture-form">
                    <div class="form-group">
                        <textarea 
                            id="memory-text" 
                            class="memory-input" 
                            placeholder="Think out loud. What happened? What did you decide? How did you feel?"
                            rows="6"
                        ></textarea>
                        <div class="form-hint">ðŸ’¡ Be specific. Include context, people, emotions.</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="memory-tags" class="form-label">Tags (optional)</label>
                        <input 
                            type="text" 
                            id="memory-tags" 
                            class="form-input"
                            placeholder="e.g. work, decision, john, regret"
                        >
                        <div class="form-hint">Separate tags with commas</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="memory-emotion" class="form-label">How did this make you feel?</label>
                        <div class="emotion-selector">
                            <button type="button" class="emotion-btn" data-emotion="grateful">ðŸ˜Œ Grateful</button>
                            <button type="button" class="emotion-btn" data-emotion="stressed">ðŸ˜° Stressed</button>
                            <button type="button" class="emotion-btn" data-emotion="excited">ðŸ¤© Excited</button>
                            <button type="button" class="emotion-btn" data-emotion="confused">ðŸ¤” Confused</button>
                            <button type="button" class="emotion-btn" data-emotion="proud">ðŸ˜Š Proud</button>
                            <button type="button" class="emotion-btn" data-emotion="regret">ðŸ˜” Regret</button>
                        </div>
                        <input type="hidden" id="memory-emotion" value="">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Save Memory</button>
                </form>
            </section>
            
            <!-- Chat View -->
            <section class="view" id="chat-view">
                <div class="view-header">
                    <h2>Chat with your assistant</h2>
                    <p class="view-subtitle">Ask about your memories, patterns, and decisions</p>
                    <div style="text-align: center; margin-top: 8px; font-size: 0.875rem; color: #a0a0a0;">
                        <span id="chat-context-info">Reading through your memories...</span>
                    </div>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message assistant-message">
                            <p>Hi there. I'm here to listen, remember, and help you think through things. Ask me anything about your memories, or just share what's on your mind.</p>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <div class="chat-input-wrapper">
                            <input 
                                type="text" 
                                id="chat-input" 
                                class="chat-input"
                                placeholder="Ask me anything... 'What patterns do you notice?' 'Why did I feel regret?'"
                            >
                            <button class="chat-send-btn" id="chat-send">Send</button>
                        </div>
                        <div class="chat-hint">Your assistant reads through your memories to answer thoughtfully</div>
                    </div>
                </div>
            </section>
            
            <!-- Memories View -->
            <section class="view" id="memories-view">
                <div class="view-header">
                    <h2>Your Memories</h2>
                    <p class="view-subtitle">Everything you've captured</p>
                </div>
                
                <div class="search-bar">
                    <input 
                        type="text" 
                        id="memory-search" 
                        class="search-input"
                        placeholder="Search memories..."
                    >
                </div>
                
                <div class="memories-list" id="memories-list">
                    <div class="empty-state">
                        <p>Nothing here yet. What's worth remembering today?</p>
                        <span>Start by capturing something in the Capture tab</span>
                    </div>
                </div>
            </section>
            
            <!-- Settings View -->
            <section class="view" id="settings-view">
                <div class="view-header">
                    <h2>Settings</h2>
                    <p class="view-subtitle">Control your experience</p>
                </div>
                
                <div class="settings-container">
                    <div class="settings-section">
                        <h3>API Configuration</h3>
                        <div class="settings-item">
                            <div class="settings-label">
                                <span>Gemini API Key</span>
                                <span class="settings-hint">Your API key is stored locally only</span>
                            </div>
                        </div>
                        <input 
                            type="password" 
                            id="api-key-input" 
                            class="form-input"
                            placeholder="Paste your Google Gemini API key here"
                        >
                        <button class="btn btn-secondary" id="save-api-key">Save API Key</button>
                        <div class="settings-hint">Get a free key at <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Privacy & Data</h3>
                        <div class="settings-item">
                            <div class="settings-label">
                                <span>All data stored locally</span>
                                <span class="settings-hint">Memories stay on your device</span>
                            </div>
                            <span class="settings-badge">âœ“ Private</span>
                        </div>
                        <button class="btn btn-secondary" id="export-data">Export My Data</button>
                        <button class="btn btn-danger" id="clear-data">Clear All Memories</button>
                    </div>
                    
                    <div class="settings-section">
                        <h3>About</h3>
                        <div class="settings-item">
                            <span>Version 1.0.0</span>
                        </div>
                        <div class="settings-item">
                            <span>Linen</span>
                            <span class="settings-hint">A quiet presence, always listening</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- First-Time User Tutorial Modal -->
    <div id="tutorial-overlay" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-modal">
            <h2>Welcome to Linen!</h2>
            <p>To get started, you'll need a Google Gemini API key.<br><strong>(It's free!)</strong><br>Here's how to get one:</p>
            
            <div class="tutorial-step">
                <span>1. Go to the Settings tab</span>
            </div>
            
            <div class="tutorial-step">
                <span>2. Follow the link to Google AI Studio</span>
            </div>

            <div class="tutorial-step">
                <span>3. Follow Google's on-screen directions to create your API key</span>
            </div>
            
            <div class="tutorial-step">
                <span>4. Paste your key in the designated area and save</span>
            </div>
            
            <button id="tutorial-ok" class="btn btn-primary">OK!</button>
        </div>
    </div>
    
    <!-- Choose OS Modal -->
    <div id="os-select-modal" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-modal">
            <h2>Install Linen to your Home Screen</h2>
            <p>For the best experience, add Linen to your phone's home screen.</p>
            <p>Which type of phone do you have?</p>
            <div class="os-selection-buttons">
                <button id="select-ios" class="btn btn-secondary">iOS</button>
                <button id="select-android" class="btn btn-secondary">Android</button>
            </div>
        </div>
    </div>

    <!-- iOS Install Tutorial Modal -->
    <div id="ios-tutorial-modal" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-modal">
            <h2>Add to Home Screen (iOS)</h2>
            <p>Follow these steps on your iPhone/iPad using Safari:</p>
            <ol style="text-align: left; max-width: 300px; margin: 0 auto 20px auto;">
                <li>Tap the <span style="font-weight: bold;">Share button</span> (square with an arrow pointing up)</li>
                <li>Scroll down and tap <span style="font-weight: bold;">"Add to Home Screen"</span></li>
                <li>Tap <span style="font-weight: bold;">"Add"</span> in the top right corner</li>
            </ol>
            <button id="ios-tutorial-ok" class="btn btn-primary">Got It!</button>
        </div>
    </div>

    <!-- Android Install Tutorial Modal -->
    <div id="android-tutorial-modal" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-modal">
            <h2>Add to Home Screen (Android)</h2>
            <p>Follow these steps on your Android device using Chrome:</p>
            <ol style="text-align: left; max-width: 300px; margin: 0 auto 20px auto;">
                <li>Tap the <span style="font-weight: bold;">Menu button</span> (three dots in the top right)</li>
                <li>Tap <span style="font-weight: bold;">"Install app"</span> or <span style="font-weight: bold;">"Add to Home screen"</span></li>
                <li>Confirm by tapping <span style="font-weight: bold;">"Install"</span> or <span style="font-weight: bold;">"Add"</span></li>
            </ol>
            <button id="android-tutorial-ok" class="btn btn-primary">Got It!</button>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <script src="./app.js"></script>
</body>
</html>